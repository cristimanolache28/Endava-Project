<!DOCTYPE html >
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments :: html_head">
    <title>Account</title>
</head>
<body>
  <div th:replace="fragments :: bootstrap_dependencies"></div>
  <div th:replace="fragments :: navbar"></div>
    <div>
        <h2 class="text-center font-weight-bold mt-5">Account Details</h2>
    </div>
  <div th:if="message != null" class="alert alert-success text-center">
      [[${message}]]
  </div>
  <form th:action="@{/account/edit}" class="mt-3" method="post" style="max-width: 700px; margin: 0 auto" th:object="${user}">
      <div class="border border-secondary rounded p-2 justify-content-center">
          <div class="form-group-row justify-content-center">
              <label>First Name</label>
              <div class="col-sm-8">
                  <input type="text" class="form-control" th:field="*{firstName}"  minlength="2" maxlength="45"/>
              </div>
          </div>
          <div class="form-group-row justify-content-center">
              <label >Last Name</label>
              <div class="col-sm-8">
                  <input type="text" class="form-control" th:field="*{lastName}"  minlength="2" maxlength="45"/>
              </div>
          </div>
          <div class="form-group">
              <label>Password</label>
              <div class="col-sm-8">
                  <input type="password" class="form-control" th:field="*{password}" placeholder="Password"
                   minlength="8" maxlength="20" oninput="checkPasswordMatch(document.getElementById('confirmPassword'))"/>
              </div>
          </div>
          <div class="form-group">
              <label>Confirm Password</label>
              <div class="col-sm-8">
                  <input  type="password" class="form-control" id="confirmPassword" placeholder="Confirm password"
                          minlength="8" maxlength="20" oninput="checkPasswordMatch(this)"/>
              </div>
          </div>
          <div class="form-group">
              <label>E-mail</label>
              <div class="col-sm-8">
                  <input type="email" class="form-control" th:field="*{email}" readonly="readonly"/>
              </div>
              <small id="emailHelp" class="form-text text-muted ml-2">You can not edit email. Contact an admin!</small>
          </div>
          <div class="form-group-row">
              <label>Phone Number</label>
              <div class="col-sm-6">
                  <input type="number" class="form-control" th:field="*{phoneNumber}"  minlength="10" maxlength="10"/>
              </div>
              <small class="form-text text-muted ml-2">  We'll never share your Phone Number with anyone else.</small>
          </div>
          <div class="form-group-row">
              <label>Age</label>
                <div class="col-sm-6">
                  <input type="number" class="form-control" th:field="*{age}"  minlength="2" maxlength="3"/>
              </div>
          </div>
          <div class="form-group-row">
              <label>Role / Roles:</label>
              <div class="col-sm-8">
                 <span><b>[[${user.roles}]]</b></span>
              </div>
          </div>
          <div class="text-center">
              <input type="submit" value="Save" class="btn btn-primary">
              <input type="button" value="Cancel" class="btn btn-secondary">
          </div>
      </div>
  </form>

  <div>
      <p class="text-center mt-4">Endava Project - Copyright &copy; Project</p>
  </div>

    <script type="text/javascript">
        function checkPasswordMatch(confirmPassword) {
            if (confirmPassword.value != $("#password").val()) {
                confirmPassword.setCustomValidity("Password do not match!")
            } else {
                confirmPassword.setCustomValidity("")
            }
        }
    </script>
</body>
</html>


